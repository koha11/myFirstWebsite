<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./assets/css/style.css">
    <link rel="stylesheet" href="./assets/icon/themify-icons/themify-icons.css">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <title>Food Web 4U</title>
</head>

<body>
    <div id="main">  
        <div id="header">
            <ul class="header-title text-center text-white header-title_fs">
                <li class="center-title "><a href="#" class="text-white clear-a">My Food</a></li>
                <li class="menu-title js-menu "><i class="ti-menu"></i></li>
                <li class="contact-title ">Contact</li>
            </ul>
        </div>

        <div class=" menu-modal js-menu-modal">
            <div class="menu-modal-container js-menu-modal-container">
                <div class="menu-modal-title modal-title_fs p20">FOOD MENU</div>
                <ul class="menu-items-container text_fs_L"></ul>
                <div class="btn-container">
                    <button class="close-btn js-close text_fs_M" style="border:none">Close</button>  
                </div>             
            </div>
        </div>

        <div class="contact-layer">
            <div class="contact-container">
                <div class="contact-modal-title modal-title_fs">My Contact</div>
                <ul class="contact-content-container">
                    <li class="contact-item text_fs_L">Name: <span class="contact-text text-title_fs ">Trần Anh Khoa</span></li>
                    <li class="contact-item text_fs_L">Age: <span class="contact-text text-title_fs ">18</span></li>
                    <li class="contact-item text-title_fs"> <a href="https://www.facebook.com/khoa.anh.tran.9966"> <i class="ti-facebook contact-icon"></i><span class="contact-text ">Khoa</span></a></li>
                    <li class="contact-item text-title_fs"> <a href="https://www.instagram.com/amoureux_11/"> <i class="contact-icon ti-instagram"></i><span class="contact-text ">amoureux_11</span></a> </li>
                    <li class="contact-item text-title_fs"> <a href="https://github.com/koha11"> <i class="contact-icon ti-github"></i><span class="contact-text ">koha11</span></a> </li>
                    <li class="contact-item text-title_fs"> <a href="https://mail.google.com/mail/u/0/#inbox"> <i class="contact-icon ti-email"></i><span class="contact-text ">khoa88108@gmail.com</span></a> </li>
                </ul>
                <div class="contact-close"></div>
                
            </div>
        </div>

        <div id="content">
            <div class="food row">
                <div class="food-menu-container">
                    <div class="row open page-1 js-food-page text-center"></div>
                    <div class="row page-2 js-food-page text-center"></div>
                </div>

                <div class="food-information">
                    <div class="food-information-container">
                        <img src="./assets/img/bún thịt luộc.jpg" alt="" class="food-information-image">
                        <div class="infor">
                            <h2 class="food-information-title text-title_fs title">Bún thịt luộc</h2>
                            <p class="food-information-description text_fs_M description">Bún ăn kèm với thịt luộc, bánh tráng chiên giòn, trứng lòng đào và mọi topping khác nếu thực khách yêu cầu. Có thể ăn với mắm gì cũng được miễn là người ta thích.</p>    
                        </div>                              
                    </div>                   
                </div>

                <div class="row food-navi-container text-center text_fs_M">
                    <a class="food-button clear-a" href="#"><<</a>
                    <a class="food-button chosen-btn clear-a js-navi-one js-navi-btn" href="#" >1</a>
                    <a class="food-button clear-a two js-navi-two js-navi-btn" href="#" >2</a>
                    <a class="food-button clear-a three js-navi-three js-navi-btn" href="#">3</a>
                    <a class="food-button clear-a four js-navi-four js-navi-btn" href="#">4</a>
                    <a class="food-button clear-a" href="#">>></a>
                </div>
            </div>

            <!-- ABOUT -->
            <hr class="about-break">
            <div class="about-container text-center">
                <!-- <h2 class="about-title title">About Me, The Food Man</h2>
                <br>
                <img src="./assets/img/chef.jpg" alt="" class="about-image">
                <div class="about-content-container">
                    <h3 class="about-par-title title">I am Who I Am!</h3>
                    <a href=""></a> <i class="about-par-description title">With Passion For Real, Good Food</i>
                    <p class="about-par-content description">Just me, myself and I, exploring the universe of unknownment.
                    I have a heart of love and an interest of lorem ipsum and mauris neque quam blog. 
                    I want to share my world with you. Praesent tincidunt sed tellus ut rutrum. 
                    Sed vitae justo condimentum, porta lectus vitae, ultricies congue gravida diam non fringilla. 
                    Praesent tincidunt sed tellus ut rutrum. Sed vitae justo condimentum, porta lectus vitae, ultricies congue gravida diam non fringilla.
                    </p>
                </div>
                <div class="random-btn"></div>
                <div class="demo"></div> -->
            </div>
                
            <hr class="about-break">
        </div>

        <!-- FOOTER  -->
        <!-- <div id="footer" class="row">
            <div class="col col-third footer-container">
                <h3 class="footer-title title">footer</h3>
                <div class="footer-description description">Praesent tincidunt sed tellus ut rutrum. Sed vitae justo condimentum, porta lectus vitae, 
                ultricies congue gravida diam non fringilla.</div>
                <div class="footer">Powered by <a href="https://www.w3schools.com/w3css/default.asp">w3.css</a></div>
            </div>
            <div class="col col-third footer-container">
                <h3 class="footer-title title blog">BLOG POSTS</h3>
                <ul>
                    <li class="blog-items p16" style="border-bottom: 1px solid #ddd">
                        <img src="./assets/img/workshop.jpg" alt="">
                        <span class="large">Lorem</span>
                        <br>
                        <span>Sed mattis nunc</span>
                    </li>
                    <li class="blog-items p16">
                        <img src="" alt="">    
                        <span class="large">Ipsum</span> 
                        <br>
                        <span>Praes tinci sed</span>
                    </li>
                </ul>
            </div>
            <div class="col col-third footer-container">
                <h3 class="footer-title title">POPULAR TAGS</h3>
                <div class="tag-container">
                    <span class="tag-name first">Travel</span>
                    <span class="tag-name">New York</span>
                    <span class="tag-name">Dinner</span>
                    <span class="tag-name">Salmon</span>
                    <span class="tag-name">France</span>
                    <span class="tag-name">Drinks</span>
                    <span class="tag-name">Ideas</span>
                    <span class="tag-name">Flavors</span>
                    <span class="tag-name">Cuisine</span>
                    <span class="tag-name">Chicken</span>
                    <span class="tag-name">Dressing</span>
                    <span class="tag-name">Fried</span>
                    <span class="tag-name">Fish</span>
                    <span class="tag-name">Duck</span>
                </div>
            </div>
        </div> -->
    </div>  
</body>


<script type="module">
    import {foodData} from "./assets/JS/foods.js"

    const $ = document.querySelector.bind(document)
    const $$ = document.querySelectorAll.bind(document)
    
    const menuModal = $('.js-menu-modal')   
    const menuModalCLoseBtns = $$('.js-close')
    const menuModalBtn = $('.js-menu')
    const menuContainer = $('.js-menu-modal-container')
    const menuModalItemList = $('.menu-items-container')

    const naviBtn = $$('.js-navi-btn')
    const foodPage = $$('.js-food-page') 

    const contactModalBtn = $('.contact-title')
    const contactModal = $('.contact-layer')
    const contactCloseBtn = $('.contact-close')
    const contactContainer = $('.contact-container')

    const randomBtn = $('.random-btn')

    const foodMenuContainer = $('.food-container')

    //IDEAS:
    // Xử lí JS khi bấm vào food items, (nó sẽ zoom ra full màn hình), tạo layer của từng food-items, giúp ích rất nhiều trong responsive
    // Lợi dụng food-number-${index} để viết JS, viết kiểu render fake API (done)
    // Sử dụng length of array để gán class cho food-description (ít chữ sẽ có độ dài nhỏ hơn nhiều chữ) !!!chú ý khi làm vậy responsive sẽ có bug
    // sử dụng CSS function: clamp() để thay cho responsive

    const web = {
        currentPage: 0,
        handleEvents: function() {
            const _this = this

            //menuModal Event
            menuModalBtn.onclick = _this.showMenuModal

            for (const menuModalCLoseBtn of menuModalCLoseBtns) {
                menuModalCLoseBtn.onclick = _this.hideMenuModal 
            }

            menuModal.onclick = _this.hideMenuModal
            menuContainer.onclick = function(event){
                event.stopPropagation() //chấm dứt hvi sự kiện nổi bọt
            }

            //Page navigation
            naviBtn.forEach((item) => item.onclick =  _this.changePage)

            //contactModal Event
            contactModalBtn.onclick = _this.openContactModal
            contactModal.onclick = _this.hideContactModal
            contactCloseBtn.onclick = _this.hideContactModal
            contactContainer.onclick = function(event){
                event.stopPropagation() //chấm dứt hvi sự kiện nổi bọt
            }

            //Random and get food
            // randomBtn.onclick = _this.randomNum

        },

        showMenuModal: function() {
            menuModal.classList.add('open')
            $('body').style.overflow = 'hidden' //stop scroll when open
        },        

        hideMenuModal: function() {
            menuModal.classList.remove('open')
            $('body').style.overflow = 'auto'  //continue scroll when close
        },

        changePage: function() {
            naviBtn.forEach((item, i) => 
            item.classList.remove('chosen-btn'))
            foodPage.forEach((page) =>
            page.classList.remove('open'))
            this.classList.add('chosen-btn')
            foodPage[Number(this.innerText) - 1].classList.add('open') //thêm class open để mở từng trang tương ứng với btn
        },

        openContactModal: function() {
            contactModal.classList.add('open')
        },

        hideContactModal: function() {
            contactModal.classList.remove('open')
        },

        // randomNum: function() {
        //     let randNumber = Math.floor(Math.random() * foodData.length)
        //     let demo = $('.demo')
        //     let foodItem = $$('.food-title')
        //     demo.innerHTML = foodItem[randNumber].innerText
        // },

        // render ra menu
        render: function() {

            let htmls = []
            let html1 = [];
            let html2 = [];

            //Lặp qua fake Api và trả về từng HTML của food
            foodData.map((food, index) => {
                htmls.push(`<li class="menu-items p20"><a class="clear-a menu-food js-close" href="">${food.name}</a></li>`)
                if(index > 7) {
                    html2.push(` 
                        <div class="col col-four food-items food-number-${index + 1}" id="" > 
                            <img src="${food.img}" alt="" class="food-image">
                            <h2 class="food-title text-title_fs title larger">${food.name}</h2>
                                <p class="food-description text_fs_M description">${food.description}</p>
                        </div>
                        `)
                }
                else{
                    html1.push(` 
                        <div class="col col-four food-items food-number-${index + 1}" id="" > 
                            <img src="${food.img}" alt="" class="food-image">
                            <h2 class="food-title text-title_fs title larger">${food.name}</h2>
                            <p class="food-description text_fs_M description">${food.description}</p>
                        </div>         
                        `) 
                }
            })

            //Thêm food vào menu các page (Cần tìm cách tối ưu hơn)
            $('.page-1').innerHTML = html1.join('')
            $('.page-2').innerHTML = html2.join('')

            menuModalItemList.innerHTML = htmls.join('')

            //set class loading cho những món chưa có hình
            for(let i = 0; i < $$('.food-items img').length; i++) {
                $$('.food-items img')[i].outerHTML.includes('<img src="./assets/img/—Pngtree—loading icon vector sign_8367373.png" alt="" class="food-image">') ? $$('.food-items img')[i].classList.add('loading') : 0
            }
            
        },

        start: function() {
            this.handleEvents()

            this.render()

        }

    } 

    web.start()

</script>
</html>